<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../localization-mixin.html">
<link rel="import" href="../siren-entity-mixin.html">
<link rel="import" href="../siren-action-mixin.html">

<dom-module id="d2l-note">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
        "[[text]]"
		- [[date]]
	</template>

	<script>
		/* @mixes LocalizationMixin
		   @mixes SirenEntityMixin
		   @mixes SirenActionMixin */
		class Note extends LocalizationMixin(SirenActionMixin(SirenEntityMixin(Polymer.Element))) {

			static get is() { return 'd2l-note'; }

			static get properties() {
				return {
					text: String,
                    date: String
				};
			}

			static get observers() {
				return [
					'_changed(entity)'
				];
			}

			_changed(entity) {
				this.text = entity.properties.text;
                this.date = this._formatDate(entity.getSubEntityByClass('create-date').properties.date, this.locale);
			}

            _getSelfLink(entity) {
				return entity.getLinkByRel('self').href;
			}

            _getNextLink(entity) {
				return entity.getLinkByRel('next').href;
			}

            _getPrevLink(entity) {
				return entity.getLinkByRel('prev').href;
			}

            _getUpLink(entity) {
				return entity.getLinkByRel('up').href;
			}

            // Leaving this guy in case we need it in the future
			_getActions(entity) {
				if (entity.entities[0] !== undefined) {
					return entity.entities[0].actions;
				} else {
					return [];
				}
			}
		}

		window.customElements.define(Note.is, Note);
	</script>
</dom-module>
