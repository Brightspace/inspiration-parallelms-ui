<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../siren-entity-mixin.html">
<link rel="import" href="../global-search.html">
<link rel="import" href="../discussions/discussions-topic.html">

<dom-module id="d2l-search-input">
    <template>
        <paper-input label="Search" value="{{value}}"></paper-input>
    </template>

    <script>
        /* @mixes SirenEntityMixin */
        class SearchInput extends Polymer.Element {

            static get is() { return 'd2l-search-input'; }

            static get properties() {
                return {
                    value: {
                        type: String,
                        value: '',
                        notify: true
                    },
                    results: {
                        type: Array,
                        notify: true
                    }
                };
            }

            constructor() {
                super();
            }

            static get observers() {
                return [
                    '_searchResultChanged(value)'
                ];
            }

            _searchResultChanged(text) {
                this.results = [];
                if ( text.length > 1) {
                    this.results = D2L.GlobalSearch.search( text );
                }
            }
        }

        window.customElements.define(SearchInput.is, SearchInput);
    </script>
</dom-module>
