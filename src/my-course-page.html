<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="activities/user-activity-usage-list.html">
<link rel="import" href="awards/awards-card.html">
<link rel="import" href="discussions/discussions-forum-list.html">
<link rel="import" href="updates/updates-card.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="siren-entity.html">
<link rel="import" href="siren-entity-mixin.html">
<link rel="import" href="courses/course-banner.html">
<link rel="import" href="content/content-module-list.html">
<link rel="import" href="rubrics/rubrics-list.html">

<dom-module id="my-course-page">
	<template>
		<style include="shared-styles">
			:host {
				display: block;
				padding: 10px;
			}

			.card-item {
				max-width: 1200px;
				width: calc(100% - 40px);
				padding: 20px;
				margin-left: auto; margin-right: auto;
			}


		</style>

		<d2l-siren-entity href="[[route.__queryParams.course]]" token="[[token]]" entity="{{organizationEntity}}"></d2l-siren-entity>
		<d2l-course-banner token="{{token}}" href="[[organizationLink.href]]" class="banner"></d2l-course-banner>

		<d2l-siren-entity href="[[href]]" token="[[token]]" entity="{{rootEntity}}"></d2l-siren-entity>
		<d2l-siren-entity href="[[userLink.href]]" token="[[token]]" entity="{{userEntity}}"></d2l-siren-entity>

		<d2l-content-module-list href="{{content.href}}" token="{{token}}" class="card-item"></d2l-content-module-list>
		<d2l-updates-card organization-filter="[[route.__queryParams.course]]" href="[[updatesLink.href]]" token="[[token]]" class="card-item"></d2l-updates-card>
		<d2l-awards-card href="[[awardsLink.href]]" token="[[token]]" class="card-item"></d2l-awards-card>
		<d2l-user-activity-usage-list href="[[activitiesLink.href]]" token="[[token]]" class="card-item"></d2l-user-activity-usage-list>
		<d2l-discussions-forum-list href="[[discussionsLink.href]]" token="[[token]]" class="card-item"></d2l-discussions-forum-list>
		<d2l-rubrics-list href="[[rubricsLink.href]]" token="[[token]]" class="card-item"></d2l-rubrics-list>
	</template>

	<script>
		/* @mixes SirenEntityMixin */
		class CoursePage extends SirenEntityMixin(Polymer.Element) {
			static get is() { return 'my-course-page'; }

			static get properties() {
				return {
					route: Object,
					organizationEntity: Object,
					activitiesLink: {
						type: Object,
						computed: '_getLinkByRel(organizationEntity, "https://activities.api.brightspace.com/rels/my-organization-activities")'
					},
					awardsLink: {
						type: Object,
						computed: '_getLinkByRel(organizationEntity, "https://api.brightspace.com/rels/my-organization-awards")'
					},
					discussionsLink: {
						type: Object,
						computed: '_getLinkByRel(organizationEntity, "https://api.brightspace.com/rels/discussions")'
					},
					rubricsLink: {
						type: Object,
						computed: '_getLinkByRel(organizationEntity, "https://api.brightspace.com/rels/rubrics")'
					},
					organizationLink: {
						type: Object,
						computed: '_getLinkByRel(organizationEntity, "self")'
					},
					content: {
						type: Object,
						computed: '_getLinkByRel(organizationEntity, "https://api.brightspace.com/rels/sequence")'
					},
					rootEntity: Object,
					userLink: {
						type: Object,
						computed: '_getLinkByRel(entity, "https://api.brightspace.com/rels/whoami")'
					},
					userEntity: Object,
					updatesLink: {
						type: Object,
						computed: '_getLinkByRel(userEntity, "https://api.brightspace.com/rels/updates")'
					}

				};
			}
		}

		window.customElements.define(CoursePage.is, CoursePage);
	</script>
</dom-module>
