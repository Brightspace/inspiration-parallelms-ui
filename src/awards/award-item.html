<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="../../bower_components/d2l-icons/tier1-icons.html">
<link rel="import" href="../../bower_components/d2l-image/d2l-image.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../siren-entity-mixin.html">

<dom-module id="d2l-award-item">
	<template>
		<style>
			:host {
				display: inline-block;
				--adjusting-background: whitesmoke;
			}
			:host([is-active]) {
				--adjusting-background: white;
			}
			paper-card {
				color: grey;
				width: 350px;
				margin: 10px;
				background-color: var(--adjusting-background);
			}
			.award-image {
				width: 50px;
				height: 50px;
				padding: 5px;
				margin-left: auto;
				margin-right: auto;
			}
			.awarded {
				padding: 5px;
				float: right;
			}
			.award-title {
				overflow: hidden;
			    text-overflow: ellipsis;
				white-space: nowrap;
				margin: 5px;
				text-align: center;
			}
		</style>
		<paper-card is-active>
			<template is="dom-if" if="[[isAwarded]]">
				<iron-icon class="awarded" icon="d2l-tier1:check-circle"></iron-icon>
				<paper-tooltip position="top">Congratulations! You have this award!</paper-tooltip>
			</template>
			<div>
				<d2l-image class="award-image" image-url="[[image.href]]" token="[[token]]"></d2l-image>
				<paper-tooltip>[[item.properties.description]]</paper-tooltip>
			</div>
			<div>
				<div class="award-title">
					[[item.properties.name]]
				</div>
				<paper-tooltip>[[item.properties.name]]</paper-tooltip>
			</div>
		</paper-card>
	</template>

	<script>
		/* @mixes SirenEntityMixin */
		class AwardItem extends SirenEntityMixin(Polymer.Element) {

			static get is() { return 'd2l-award-item'; }

			static get properties() {
				return {
					item: {
						type: Object,
						reflectToAttribute: true
					},
					image: {
						type: Object,
						computed: '_getSubEntityByRel(item, "https://api.brightspace.com/rels/award-image")'
					},
					isAwarded: {
						type: Boolean,
						computed: '_hasClass(item, "awarded")'
					}
				};
			}
		}

		window.customElements.define(AwardItem.is, AwardItem);
	</script>
</dom-module>
